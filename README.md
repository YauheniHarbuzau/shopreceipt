# Shop Receipt

**Консольное приложение, реализующее формирование кассового чека.**</br>
**Сформированный кассовый чек выводится в консоль и в файл.**

**Автор Евгений Гарбузов**

***

### Описание принципа работы

Приложение принимает данные через консоль в виде строки (*String*) с набором параметров формата:

`ID товара - количество товара`

Пример:

`1-3 2-4 3-5 card-1111`

*1-3* - товар с *ID 1* в количестве *3* шт.,</br>
*2-4* - товар с *ID 2* в количестве *4* шт.,</br>
*3-5* - товар с *ID 3* в количестве *5* шт.,</br>
*card-1111* - платежная (скидочная) карта с номеров *1111*.

- Параметры следует разделять одним пробелом.
- Параметров, содержащих *ID* товара и его количество, может быть сколько угодно много.
- Параметр, содержащий номер платежной карты, необязательный и может быть только один.
- Параметры, содержащие *ID* товара или номер платежной карты, отсутствующие в базе данных, не учитываются</br>
  (игнорируются при формировании чека).
- При наличии от пяти акционных товаров, на них будет дана скидки *10%*.

***

### Примеры работы приложения

Пример 1

```
Введите данные
2-1 1-2 5-1 10-3 card-1234
```

```
******************************
хлеб  x2                  4,00$
филе кур.  x1             4,50$
пит. вода  x3             3,00$
батон  x1                 2,50$
******************************
сумма                    14,00$
скидка                    5,00%
******************************
итого к оплате           13,30$
******************************
```

Пример 2

```
Введите данные
3-1 7-1 11-2 4-2 20-1 card-4321
```

```
******************************
мука  x1                  1,50$
яйцо кур.  x2             5,00$
говядина  x1              7,50$
газ. вода  x2             3,00$
******************************
сумма                    17,00$
скидка                    0,00%
******************************
итого к оплате           17,00$
******************************
```

Во втором примере в данных пять товаров, а на сформированном чеке четыре.</br>
Это связано с тем, что товар с *ID* 20 не учитывается, так как отсутствует в базе данных.</br>
Так же в чеке нет скидки, так как платежная карта под номером *4321* отсутствует в базе данных.

***

### Параметры приложения

- Java 17
- Система автоматической сборки Gradle 7.5.1
- База данных PostgreSQL*
- Точка входа в приложение - класс
  [ShopreceiptApplication](src/main/java/com/example/shopreceipt/ShopreceiptApplication.java "ShopreceiptApplication.java")
- Реализованы REST-контроллеры для поиска всех товаров и платежных карт, поиска по *ID*, сохранения, удаления по *ID*
- Реализованы тесты
  [ProductServiceTest](src/test/java/com/example/shopreceipt/ProductServiceTest.java "ProductServiceTest.java"),
  [CardServiceTest](src/test/java/com/example/shopreceipt/CardServiceTest.java "CardServiceTest.java"),
  [ReceiptServiceTest](src/test/java/com/example/shopreceipt/ReceiptServiceTest.java "ReceiptServiceTest.java")

*Информация для подключения к базе данных (*url*, *username*, *password*) находится в
[application.properties](src/main/resources/application.properties "application.properties").</br>
Автозаполнение базы данных происходит в классе
[InsertToDataBase](src/main/java/com/example/shopreceipt/util/InsertToDataBase.java "InsertToDataBase.java").

Изменить название файла сохраняемого чека и путь к нему можно в классе
[Constants](src/main/java/com/example/shopreceipt/constants/Constants.java "Constants.java")</br>
*FILE_NAME* и *FILE_PATH* соответственно (по умолчанию `D:/receipt.txt`).

***

### Библиотеки и зависимости, используемые в приложении

- *Spring Boot Web*, *Data JPA*, *Validation*
- *PostgreSQL JDBC Driver* для работы с базой данных
- *Project Lombok* для автоматической генерации геттеров, сеттеров, конструкторов

Точную информацию о библиотеках и зависимостях можно посмотреть в
[build.gradle](build.gradle "build.gradle").

***